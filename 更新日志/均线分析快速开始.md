# 均线分析系统 - 快速开始

## 🚀 5分钟上手指南

### 步骤1：配置基金信息（2分钟）

1. **复制配置文件模板**
```bash
# Windows PowerShell
Copy-Item holdings_config.example.json holdings_config.json

# 或者手动复制文件
```

2. **编辑配置文件** `holdings_config.json`

**已投入的基金：**
```json
"holdings": {
  "017811": {
    "name": "你的基金名称",
    "cost_basis": 1.0,                          // 你买入时的净值
    "amount": 10000,                            // 投入金额
    "invested": true,
    "investment_start_date": "2024-01-01"      // ⚠️ 重要！你实际买入的日期
  }
}
```

**想观察的基金：**
```json
"watchlist": {
  "161725": {
    "name": "招商中证白酒",
    "invested": false,
    "watch_start_date": "2024-01-01",          // 从什么时候开始关注
    "note": "等待回调到低位买入"
  }
}
```

### 步骤2：运行分析（1分钟）

**方式1：双击运行（最简单）**
```
双击 run_ma_analysis.bat
```

**方式2：命令行运行**
```bash
py ma_analysis.py
```

### 步骤3：查看分析结果（2分钟）

系统会显示：

```
============================================================
📊 招商中证白酒 (161725)
============================================================

💰 当前净值: 0.8234

📈 均线分析:
  月线(MA20):  0.8567   偏离:  -3.89%
  季线(MA60):  0.9123   偏离:  -9.74%
  年线(MA250): 1.0234   偏离: -19.55%
  长期(MA500): 1.1456   偏离: -28.12%

🎯 位置分析:
  当前位置: low
  信号强度: 4/5
  操作建议: ⭐⭐⭐ 强烈建议加仓    ← 看这里！

  详细分析:
    • 季线下方9.74% - 中期偏低
    • 年线下方19.55% - 长期偏低
    • 长期均线下方28.12% - 历史低位
```

最后会有**操作建议汇总**：

```
============================================================
📊 操作建议汇总
============================================================

⭐⭐⭐ 强烈建议加仓:
  • 招商中证白酒 (161725)
  • 易方达中小盘 (110011)

⭐ 持有观望:
  • 基金1 (017811)
  • 基金2 (002963)
```

## 📊 看懂分析报告

### 1. 均线偏离度

| 偏离度 | 含义 | 建议 |
|--------|------|------|
| < -15% | 远低于均线，超跌 | 可以考虑加仓 |
| -15% ~ -5% | 低于均线，偏低 | 可以适当加仓 |
| -5% ~ +5% | 接近均线，合理 | 持有观望 |
| +5% ~ +15% | 高于均线，偏高 | 可以适当减仓 |
| > +15% | 远高于均线，超涨 | 考虑减仓 |

### 2. 操作建议

| 建议 | 说明 | 操作 |
|------|------|------|
| ⭐⭐⭐ 强烈建议加仓 | 历史低位，机会难得 | 可以考虑大额加仓 |
| ⭐⭐ 可以适当加仓 | 相对低估，有上涨空间 | 可以适当加仓 |
| ⭐ 持有观望 | 合理区间，不急操作 | 保持现有仓位 |
| ⚠️⚠️ 可以适当减仓 | 相对高估，注意风险 | 可以适当减仓 |
| ⚠️⚠️⚠️ 建议减仓 | 历史高位，风险较大 | 建议减仓锁定收益 |

### 3. 信号强度

```
信号强度: 4/5
```

- **+5 到 +3**：强烈买入信号
- **+2 到 +1**：适度买入信号
- **0**：中性，观望
- **-1 到 -2**：适度卖出信号
- **-3 到 -5**：强烈卖出信号

## ⚡ 常见场景

### 场景1：我想知道现在能不能买某只基金

1. 在 `watchlist` 中添加该基金
2. 运行 `py ma_analysis.py`
3. 查看操作建议

如果显示 ⭐⭐⭐ 或 ⭐⭐，说明当前是相对好的买入时机。

### 场景2：我的基金涨了很多，要不要卖

1. 确保在 `holdings` 中配置了该基金
2. 运行分析查看位置
3. 如果显示 ⚠️⚠️⚠️ 或 ⚠️⚠️，说明当前位置偏高

### 场景3：我想看看我的基金真实收益

1. **必须**设置 `investment_start_date` 为你实际买入日期
2. 运行分析会显示：

```
💵 投资收益分析:
  投入日期: 2024-01-01
  投入时净值: 0.9500
  当前净值: 0.8234
  📉 收益率: -13.33%
```

这是你从买入到现在的真实收益！

### 场景4：我想定期检查所有基金

设置定时任务，每天自动分析：

```bash
py main.py
# 选择 2: 启动定时任务
```

每天会自动生成包含均线分析的完整报告。

## 💡 重要提醒

### ✅ 必做事项

1. **设置 investment_start_date**
   - 这是你实际买入的日期
   - 不设置的话收益计算不准确

2. **定期更新配置**
   - 加仓后更新金额和成本
   - 新买基金添加到 holdings
   - 不再关注的基金从 watchlist 删除

3. **结合实际情况**
   - 均线分析只是参考
   - 还要看基金本身质量
   - 考虑市场整体环境

### ❌ 常见错误

1. **不设置投入日期**
   ```json
   {
     "cost_basis": 1.0,
     "amount": 10000
     // 缺少 investment_start_date ❌
   }
   ```
   
2. **invested 字段写错**
   ```json
   // 持仓基金必须是 true
   "holdings": {
     "017811": {
       "invested": false  // ❌ 错误！
     }
   }
   
   // 观察基金必须是 false
   "watchlist": {
     "161725": {
       "invested": true  // ❌ 错误！
     }
   }
   ```

3. **配置文件格式错误**
   - 最后一项不要加逗号
   - 字符串用双引号，不能用单引号
   - 日期格式必须是 YYYY-MM-DD

## 📚 进阶功能

### 分析单只基金

```bash
py ma_analysis.py
# 选择 2: 分析单只基金
# 输入基金代码：161725
# 输入基金名称：招商中证白酒
# 输入投入日期：2024-01-01
```

### 保存分析报告

运行完成后会询问是否保存：

```
是否保存完整分析报告到文件? (y/n): y
✅ 报告已保存到 ma_analysis_report_20251030_153045.json
```

### 集成到每日报告

```bash
py main.py
# 选择 1: 立即运行一次
```

会生成包含基础分析 + 均线分析的完整报告。

## 🆘 遇到问题？

**Q: 运行报错 "未找到 holdings_config.json"**
A: 需要先复制 holdings_config.example.json 为 holdings_config.json

**Q: 显示 "无法获取历史数据"**
A: 检查网络连接，或者基金代码是否正确

**Q: 收益率和我的实际不一样**
A: 检查是否设置了正确的 investment_start_date

**Q: 新基金没有长期均线**
A: 正常现象，成立不足500天的基金无法计算长期均线

## 📖 更多文档

- **详细说明**：[均线分析说明.md](均线分析说明.md)
- **使用指南**：[使用说明.md](使用说明.md)
- **项目文档**：[README.md](README.md)

---

**投资有风险，决策需谨慎！均线分析仅供参考，不构成投资建议。**

